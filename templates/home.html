<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>Final Project Tech News</title>
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
          integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link href="../static/style.css" rel="stylesheet" type="text/css">

    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
</head>
<body>
<div>
    {% include 'header.html' %}
</div>

<div class="main-body">
    <div class="rn-bar">
        <h3 class="block-text">Random News</h3>
        <button class="btn btn-primary btn-sm" onclick="window.location.href='/'" type="button">
            <i class="bi bi-shuffle"></i>
            Shuffle
        </button>
        <button class="btn btn-primary btn-sm" onclick="window.location.href='/collections/'" type="button">
            <i class="bi bi-three-dots"></i>
            More
        </button>
    </div>

    <div class="cards">
        <script>
            var data = "{{ articles }}"
            var articles = JSON.parse(data.replace(/\&quot;/g, '\"'))

            let row_start = '<div class="row">'
            let row_end = '</div>'
            for (let i = 0; i < 10; i++) {
                document.write(row_start)
                for (let j = 0; j < 2; j++) {
                    document.write(`
                        <div class="col-sm-6">
                            <div class="card">
                                <div class="card-body">
                                    <h6 class="card-title">
                                    <a class="link-dark ac-title link-offset-1 link-offset-1-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover" href="${articles[i * 2 + j].link}">
                                    ${articles[i * 2 + j].title}
                                    </a>
                                    </h6>
                                    <p class="card-subtitle mb-2 text-body-secondary"><strong>${articles[i * 2 + j].src}</strong> <br> ${articles[i * 2 + j].date} ${articles[i * 2 + j].time}</p>
                                    <p class="card-text">${articles[i * 2 + j].content}</p>
                                    <div class="card-bottom">
                                        <a class="card-link" style="float: left" href="${articles[i * 2 + j].link}">
                                        Read More
                                        </a>
                                        <span class="badge ${ articles[i * 2 + j].com_count > 0 ? 'text-bg-primary':'text-bg-secondary'}" style="float: right">${articles[i * 2 + j].com_count}</span>
                                    </div>
                                </div>
                            </div>
                        </div>`)
                }
                document.write(row_end)
            }
        </script>
    </div>

    <script crossorigin="anonymous"
            integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
</div>
</body>
</html>

<style>
    .rn-bar {
        width: 100%;
        height: 45px;
        display: flex;
        align-items: center;
        margin: 0 10px;
    }

    .rn-bar > .block-text {
        width: fit-content;
        line-height: 45px;
        margin: auto 10px auto 0;
    }

    .rn-bar > .btn {
        margin-right: 10px;
    }

    .cards {
        margin-top: 20px;
    }

    .row {
        margin: 24px 0;
    }

    .card-bottom {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
</style>
